import PageContainer from "@/components/layout/page-container";
import VulnerabilityTable from "../vulnerability-tables";
import { Button, buttonVariants } from "@/components/ui/button";
import { Separator } from "@/components/ui/separator";

import { cn } from "@/lib/utils";
import { Plus } from "lucide-react";
import Link from "next/link";

import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from "@/components/ui/dialog";
import VulnerabilityForm from "../vulnerability-form";
import { Modal } from "@/components/ui/modal";
import { useState } from "react";

const VulnerabilityListingPage = () => {
  const [open, setOpen] = useState(false);

  const vulnerabilities: any[] = [
    {
      id: 24,
      name: "SQL Injection",
      description:
        "A code injection technique that exploits a security vulnerability in an application.",
      severity: "High",
      cvss: "7.5",
      cve: "CVE-2021-XXXX",
      status: "open",
    },
    {
      id: 24,
      name: "SQL Injection",
      description:
        "A code injection technique that exploits a security vulnerability in an application.",
      severity: "High",
      cvss: "7.5",
      cve: "CVE-2021-XXXX",
      status: "open",
    },
    {
      id: 24,
      name: "SQL Injection",
      description:
        "A code injection technique that exploits a security vulnerability in an application.",
      severity: "High",
      cvss: "7.5",
      cve: "CVE-2021-XXXX",
      status: "open",
    },
  ];

  return (
    <PageContainer>
      <div className="space-y-4">
        <div className="flex items-start justify-between">
          <h3>{`Vulnerability (${vulnerabilities.length})`}</h3>

          <Button onClick={() => setOpen(true)}>
            <Plus className="mr-2 h-4 w-4" /> Add New
          </Button>
          <Modal
            isOpen={open}
            onClose={() => setOpen(false)}
            title="Upadate Or New"
          >
            <VulnerabilityForm />
          </Modal>
        </div>
        <Separator />
        <VulnerabilityTable
          data={vulnerabilities}
          totalData={vulnerabilities.length}
        />
      </div>
    </PageContainer>
  );
};
export default VulnerabilityListingPage;
